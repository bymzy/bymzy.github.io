# iPad 上使用 PDF 阅读器

## 功能说明

这是一个专为移动设备优化的 PWA (Progressive Web App) PDF 阅读器，支持在 iPad 上使用。

## 在 iPad 上的部署和使用

### 方式 1：通过 Web 服务器访问

1. **部署应用到 Web 服务器**
   - 将应用文件上传到服务器（例如：`example.com/pdf-reader/`）
   - 确保服务器支持 HTTPS（PWA 要求）

2. **在 iPad Safari 中打开**
   - 访问：`https://your-domain.com/pdf-reader/`
   - 点击分享按钮 → "添加到主屏幕"
   - 为应用命名，点击"添加"
   - 应用会作为独立应用安装到主屏幕

3. **在应用中使用**
   - 点击 **"📤 上传PDF文件"** 按钮
   - 选择 PDF 文件进行上传（支持多选）
   - 或拖放 PDF 文件到拖放区域

### 方式 2：使用 iCloud Drive（iPad 本地使用）

由于 iPad 上的浏览器沙箱限制，无法直接访问本地文件系统。推荐以下方案：

1. **使用文件上传功能**
   - 将 PDF 文件通过 Files 应用导入
   - 在应用中点击"上传"，从 Files 应用选择 PDF
   - 文件会在应用中打开阅读

2. **从 Email 或云盘打开**
   - 从邮件、OneDrive、Google Drive 等获取 PDF
   - 用 Safari 或本应用打开
   - 导入到应用中继续阅读

### 方式 3：本地开发（iPad 访问同网络电脑）

1. **在电脑上启动本地服务器**
   ```bash
   # 如果有 Python
   python -m http.server 8000
   
   # 如果有 Node.js
   npx http-server
   ```

2. **获取本机 IP 地址**
   - Windows: `ipconfig`
   - Mac/Linux: `ifconfig`

3. **在 iPad Safari 中访问**
   - 输入：`http://192.168.x.x:8000/pdf.html`
   - 确保 iPad 和电脑在同一网络

## 关键特性

### 文件管理
- ✅ 支持上传多个 PDF 文件
- ✅ 支持多层文件夹结构浏览（本地文件系统）
- ✅ 实时显示阅读进度百分比
- ✅ 自动保存阅读位置

### 阅读功能
- ✅ 流畅的翻页体验
- ✅ 触摸手势支持（滑动翻页）
- ✅ 鼠标拖拽翻页
- ✅ 当前页码显示

### 离线功能
- ✅ Service Worker 支持离线访问
- ✅ 自动缓存资源
- ✅ 离线时可继续阅读已加载的 PDF

### PWA 功能
- ✅ 添加到主屏幕
- ✅ 全屏显示
- ✅ 自定义主题颜色
- ✅ 优化的移动 UI

## 存储容量

- **浏览器存储**: 大多数浏览器提供 50MB-100MB 的存储空间
- **上传限制**: 取决于浏览器内存，通常可处理数百 MB 的 PDF

## 故障排除

### 1. 无法上传文件
- 确保选择的是有效的 PDF 文件
- 检查浏览器是否允许文件访问
- 尝试刷新页面重试

### 2. PDF 显示不完整
- 检查网络连接
- 尝试重新加载应用
- 使用更新的 Safari 版本

### 3. 离线不可用
- 确保首次打开时有网络连接
- 检查浏览器的 Service Worker 是否已注册
- 清除浏览器缓存后重试

## 浏览器兼容性

| 浏览器 | 支持度 |
|-------|------|
| Safari (iOS 13+) | ✅ 完全支持 |
| Chrome (iOS) | ✅ 部分支持 |
| Firefox (iOS) | ⚠️ 基础支持 |
| Edge (iOS) | ✅ 部分支持 |

## 电脑端使用

### 电脑上支持的功能
- ✅ 选择本地目录（File System Access API）
- ✅ 自动扫描子目录中的所有 PDF
- ✅ 文件上传
- ✅ 所有 iPad 功能

### 步骤
1. 在浏览器中打开 `pdf.html`
2. 点击 **"📁 选择目录（电脑）"** 
3. 授予目录访问权限
4. 应用会自动列出所有 PDF 文件

## 性能建议

1. **文件大小**: 建议单个 PDF < 50MB
2. **批量上传**: 一次上传 < 10 个文件
3. **网络**: 使用 WiFi 获得最佳体验
4. **浏览器**: 定期更新到最新版本

## 数据隐私

- 所有数据存储在本地（localStorage）
- 不上传任何文件到服务器
- 关闭应用后数据保留
- 清除浏览器缓存会删除所有数据

## 常见问题

**Q: 为什么 iPad 不能直接访问本地文件？**
A: 这是 WebAPI 的安全限制。iPad Safari 不支持 File System Access API。

**Q: 能否将 PDF 永久保存在 iPad 上？**
A: 可以，通过浏览器缓存和 localStorage。建议定期备份重要文件。

**Q: 支持哪些 PDF 功能？**
A: 支持阅读、缩放、翻页。不支持编辑、注释等高级功能。

**Q: 如何导出阅读进度？**
A: 目前进度只保存在本地。可通过浏览器开发者工具导出 localStorage 数据。

## 技术栈

- HTML5
- CSS3
- JavaScript (ES6+)
- PDF.js (PDF 渲染)
- Service Worker (离线支持)

## 更新日志

### v2.0 (2026-01-22)
- ✨ 添加文件上传功能
- ✨ iPad 优化
- ✨ PWA 完整支持
- ✨ 多层文件夹导航
- 🐛 修复多个 UI 问题

### v1.0 (初始版本)
- 基础 PDF 阅读功能
- 目录导航

## 许可证

本应用为自由使用。

---

**最后更新**: 2026-01-22

如有问题，请检查浏览器控制台获取更多错误信息。
